{% extends "base.html" %}
{% block title %}–°–∫–ª–∞–¥{% endblock %}
{% block content %}
<!-- –°–µ–∫—Ü–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π -->
<div class="w-full p-4 grid gap-4 bg-white border rounded-lg shadow-lg">
    <h2 class="text-xl font-semibold text-center text-primary-600">–í–µ—Å—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
    <hr>
    <table class="border border-gray-300 border-collapse">
        <thead>
            <tr class="bg-gray-50 border border-gray-300">
                <th class="p-2 text-center">#</th>
                <th class="p-2 text-start">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th class="p-2 text-start">–ü—Ä–µ–¥–º–µ—Ç</th>
                <th class="p-2 text-start">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                <th class="p-2 text-start">–°–æ—Å—Ç–æ—è–Ω–∏–µ</th>
                <th class="p-2 text-center">üíæ</th>
            </tr>
        </thead>
        <tbody id="inventoryTableBody">
            {% for product in products %}
            <form method="post">
            {% csrf_token %}
            <tr class="border-b border-gray-300 hover:bg-primary-50 transition">
                <th class="p-2 text-center">{{ forloop.counter }}</th>
                <td class="p-2 text-start break-all">{{ product.owner }}</td>
                <td class="p-2 text-start break-all">{{ product.name }}</td>
                <td class="p-2 text-start">{{ product.quantity|default:"1" }}</td>
                <td class="p-2">
                    {% if product.state == 'inactive' %}
                    <select name="state" class="px-1 bg-gray-50 border border-gray-300 focus:outline focus:outline-primary-500 transition" required>
                        <option selected value="inactive">–í –∑–∞–ø–∞—Å–µ</option>
                        <option value="active">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</option>
                        <option value="broken">–°–ª–æ–º–∞–Ω–æ</option>
                    </select>
                    {% elif product.state == 'active' %}
                    <select name="state" class="px-1 bg-gray-50 border border-gray-300 focus:outline focus:outline-primary-500 transition" required>
                        <option value="inactive">–í –∑–∞–ø–∞—Å–µ</option>
                        <option selected value="active">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</option>
                        <option value="broken">–°–ª–æ–º–∞–Ω–æ</option>
                    </select>
                    {% elif product.state == 'broken' %}
                    <select name="state" class="px-1 bg-gray-50 border border-gray-300 focus:outline focus:outline-primary-500 transition" required>
                        <option value="inactive">–í –∑–∞–ø–∞—Å–µ</option>
                        <option value="active">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</option>
                        <option selected value="broken">–°–ª–æ–º–∞–Ω–æ</option>
                    </select>
                    {% endif %}
                </td>
                <input
                type="hidden"
                name="productname"
                value="{{ product.name }}">
                <input
                type="hidden"
                name="username"
                value="{{ product.owner.id }}">
                <td class="p-2">
                    <button type="submit" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" class="w-full cursor-pointer bg-primary-500 hover:bg-primary-700 text-center text-white rounded transition">
                        ‚úì
                    </button>
                </td>
                </form>
            </tr>
            {% empty %}
            <tr class="border-y border-gray-300">
                <td colspan="4" class="py-2 text-center text-gray-400 transition">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}